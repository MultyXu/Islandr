{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block title %}Island Profile{% endblock %}

{% block page_content %}
{% if current_user.group_id == group.id or current_user.is_admin%}
    {% if group.is_approved == 0 %}
    <div class="alert alert-warning text-center" role="alert">
        Pending
    </div>
    {% elif group.is_approved == -1 %}
    <div class="alert alert-danger text-center" role="alert">
        Rejected
    </div>
    <p style="color: red;">{{ group.reject_msg|safe }}</p>
    {% endif %}
{% endif %}
<hr class="mb-4">

<div class="content-section mb-4" style="background-color:rgba(226, 226, 226, 0.315);">
    <div style="position:relative;">
        <img class="img-fluid mb-3" src="{{ background }}">
        <div class="media px-4 py-4 ">
                <img class="rounded-circle account-img ml-4 mr-5" src="{{ logo }}" height="100px" width="100px"/>
                <div class="media-body">
                    <h1 class="account-heading">{{ group.groupname }}</h1>
                    <br />
                    <a style="color:black;" href="{{ url_for('main.account', user_id=group.owner[0].id) }}">
                        <h6><b>Leader:</b>  {{ group.owner[0].username }}</h6>
                    </a>
                    <hr>
                    <h6><b>Tag:</b>  {{ group.tag }}</h6>
                    <hr/>
                    <h6><b>Events:</b>  {{ group.posts.filter_by(is_approved=1).count() }}</h6>
                    <hr/>
                    <a style="color:black;" href="{{ url_for('group.group_members', id=group.id) }}">
                        <h6><b>Members:</b>  {{ macros.profile_pic_generator(users=users, amount=3) }}</h6>
                    </a>
                    <hr/>
                    <h6><b>About Us:</b>  {{ group.about_us }}</h6>
                    <hr/>
                    {% if not current_user.id == group.owner[0].id %}
                        {% if current_user.has_joined(group) %}
                            {% if current_user.been_approved(group) %}
                                <a href="{{ url_for('group.group_leave', id=group.id) }}"><button type="button" class="btn btn-info float-right">Leave</button></a>
                            {% else %}
                                <button type="button" class="btn btn-secondary float-right">Pending</button>
                            {% endif %}
                        {% else %}
                            <a href="{{ url_for('group.group_join', id=group.id) }}"><button type="button" class="btn btn-outline-info float-right">Join</button></a>
                        {% endif %}
                    {% endif %}

                    {% if current_user.id == group.owner[0].id %}
                        <div class="content-section mt-3">
                            <a href="{{ url_for('group.group_profile_edit', id=group.id) }}">
                                <button class="btn btn-outline-secondary">Edit Profile</button>
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
    </div>
</div>

<div class="mt-3">
    {% if current_user.is_admin %}
        {% if group.is_approved == 0 %}
            <a href="{{ url_for('group.group_approved', id=group.id) }}"><button type="button" class="btn btn-success">Approve</button></a>
            <a href="{{ url_for('group.group_rejected', id=group.id) }}"><button type="button" class="btn btn-danger float-right">Reject</button></a>
        {% endif %}
    {% endif %}
</div>

{% if group.is_approved == 1 and current_user.id == group.owner[0].id %}
<div class="container">
    <div class="row"> <!-- The row for titles -->
        <div class="col-8"><h2>Moments</h2></div>
        <div class="col-4"><h2>Events</h2></div>
    </div>
    <div class="row"> <!-- The row for buttons -->
        <div class="col-8">
            <a href="{{ url_for('moment.create_moment') }}">
                <button type="button" class="btn btn-info btn-lg btn-block my-4">New Moment</button>
            </a>
        </div>
        <div class="col-4">
            <a href="{{ url_for('main.post_editor') }}">
                <button type="button" class="btn btn-info btn-lg btn-block my-4">New Event</button>
            </a>
        </div>
    </div>
    <div class="row"> <!-- The row for moments and events -->
        <div class="col-8"> <!-- The column for moments -->


            <div class="media">
              <img class="rounded-circle account-img mr-3" src="{{ logo }}" height="80px" width="80px" alt="TEAM_LOGO">
              <div class="media-body">
                <!-- <h5 class="mt-0">TEAM NAME</h5> -->
                <h4 class="mt-0">TEDx CORE TEAM</h4>
                <h6 class="mt-0">Jul.15th, 2019</h6>
                <div class="mb-3">


                Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
                </div>
                <div class="container">

                    <div class="row md-1 mt-1"> <!-- Momenet pictures -->
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                    </div>

                    <div class="row md-1 mt-1"> <!-- Momenet pictures -->
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                        <div class="col pr-1 pl-1">
                            <img class="img-fluid mb-1" src="{{ logo }}" height="250px" width="250px">
                        </div>
                    </div>

                </div>

              </div>
            </div>




        </div>
        <div class="col-4"> <!-- the column for events -->
            {{ macros.post_generator(posts, show_dot=(current_user.id==group.owner[0].id), full_width=True) }}
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
